var e=Object.defineProperty,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,r=(a,s,t)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t;import{_ as l}from"./LoadingSpin-9368b4a2.js";import{_ as n}from"./FormInputSelect-9ffb20b9.js";import{_ as i}from"./FormInputText-cc88a116.js";import{ap as o,aq as d,ar as m,r as c,ai as u,s as p,o as f,c as g,d as b,e as h,w as v,a as x,D as y,t as w,l as S,am as I,x as _,T as j,h as V,an as B}from"./vendor-385d4c3c.js";import{c as U,a as M,b as k,d as E}from"./object-9b840b78.js";import{s as T}from"./setLocale-c8d42d8a.js";import{_ as O,e as P,f as q}from"./index-407e3f79.js";T({mixed:{default:"無效的輸入",required:"必填欄位"},string:{min:"長度不可小於 ${min}",email:"須符合 Email 格式 !"}});const L={name:"SignUpModal",components:{FormInputText:i,FormInputSelect:n,LoadingSpin:l,Switch:o,SwitchGroup:d,SwitchLabel:m},props:{isOpen:{type:Boolean,default:!1}},data:()=>({schema:U().shape({"register-email":M().email().required(),"register-name":M().required(),"register-username":M().required(),"register-password":M().min(6).required(),"register-confirm_password":M().required().oneOf([k("register-password"),null],"密碼需一致 !"),"register-articlecategoryId":U().shape().nullable().required("請至少選擇一項興趣 !"),"register-agree":E().oneOf([!0],"必填 !")}),interest:null,interestList:[],params:{userName:"",passWord:"",name:"",email:"",articlecategoryId:null},agreeTerms:!1,receiveMail:!1,isFormValid:!1,isInvalidAniProcess:null,signUpProcess:!1,signUpErrorMsg:""}),mounted(){P().then((e=>{this.interestList=e.data})).catch((e=>{}))},methods:{onSubmit(e){this.isFormValid=!0;const l={};for(const a in e){const s=a.includes("-")?a.split("-"):a;l[s[s.length-1]]=e[a]}const n=l,{confirm_password:i,articlecategoryId:o}=n,d=((e,r)=>{var l={};for(var n in e)s.call(e,n)&&r.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&a)for(var n of a(e))r.indexOf(n)<0&&t.call(e,n)&&(l[n]=e[n]);return l})(n,["confirm_password","articlecategoryId"]);let m=((e,l)=>{for(var n in l||(l={}))s.call(l,n)&&r(e,n,l[n]);if(a)for(var n of a(l))t.call(l,n)&&r(e,n,l[n]);return e})({articlecategoryId:o.Id},d);q(m).then((e=>{e.data.success?(this.$notify({group:"success",title:"註冊成功 !",text:`${e.data.message}`},2500),this.$router.push({name:"SignIn"})):(this.signUpErrorMsg=e.data.message,this.$notify({group:"error",title:"註冊失敗 !",text:`${e.data.message}`},2500))})).catch((e=>{}))},onInvalidSubmit(e){this.isFormValid=!1,this.isInvalidAniProcess=!0},animationEndHandler(){this.isInvalidAniProcess=!1}}},F=b("div",{class:"py-6 border-b-myBrown md:py-4 md:bg-myYellow md:border-b-2"},[b("h1",{class:"text-2xl font-bold text-center text-myBrown select-none"}," 切切會員註冊 ")],-1),$={class:"overflow-x-hidden h-[80vh] bg-myGray md:h-[60vh]"},A={class:"px-10 pb-6 md:pt-10 md:pb-8"},Y={class:"relative mb-8"},H={class:"absolute -bottom-6 left-0 m-0 text-sm text-red-500"},z={class:"relative my-4"},G={class:"flex items-center"},N=b("span",{class:"font-bold text-myBrown"},[_(" 您是否同意 "),b("a",{href:"javascript:;",class:"text-xl hover:text-myYellow underline underline-offset-4"}," 切切規範 "),_(" ? ")],-1),D=b("span",{class:"sr-only"},"您是否同意切切規範",-1),W={class:"absolute top-1/2 -right-4 m-0 text-sm text-red-500 -translate-x-full -translate-y-1/2"},C={class:"my-4"},J={class:"flex items-center"},K=b("span",{class:"font-bold text-myBrown"},"您是否願意收到電子信 ?",-1),Q=b("span",{class:"sr-only"},"您是否願意收到電子信",-1),R={class:"flex justify-center py-2"},X={key:0,class:"text-red-500"},Z={class:"flex flex-col justify-center items-center mt-2"},ee=["disabled"],ae={class:"block mt-8 font-bold text-center text-myBrown md:hidden"},se=_(" 已經有帳號了 ? "),te=b("span",{class:"inline-block underline underline-offset-4"},"點我登入",-1),re=b("span",{class:"align-sub material-icons"},"arrow_forward",-1);const le={name:"SignUp",components:{SignUpModal:O(L,[["render",function(e,a,s,t,r,o){const d=i,m=n,_=c("v-field"),j=c("SwitchLabel"),V=c("Switch"),B=c("SwitchGroup"),U=l,M=c("router-link"),k=c("v-form"),E=u("invalid");return p((f(),g("div",{class:"overflow-hidden h-screen ring-myBrown md:w-96 md:h-auto md:rounded-xl md:ring-2 md:shadow-xl md:drop-shadow-2xl",onAnimationend:a[4]||(a[4]=I(((...e)=>o.animationEndHandler&&o.animationEndHandler(...e)),["stop"]))},[F,b("div",$,[b("div",A,[h(k,{"validation-schema":r.schema,onSubmit:o.onSubmit,onInvalidSubmit:o.onInvalidSubmit},{default:v((()=>[x(" Email "),h(d,{focus:!0,name:"register-email",type:"email",label:"Email",placeholder:"Email",class:"mb-10","success-message":""}),x(" 暱稱 "),h(d,{name:"register-name",type:"text",label:"暱稱",placeholder:"暱稱",class:"mb-10","success-message":""}),x(" 帳號 "),h(d,{name:"register-username",type:"text",label:"帳號",placeholder:"帳號",class:"mb-10","success-message":""}),x(" 密碼 "),h(d,{name:"register-password",type:"password",label:"密碼",placeholder:"密碼",class:"mb-10","success-message":""}),x(" 再次輸入密碼 "),h(d,{name:"register-confirm_password",type:"password",label:"再次輸入密碼",placeholder:"再次輸入密碼",class:"mb-10","success-message":""}),x(" 選擇興趣 "),b("div",Y,[h(_,{modelValue:r.interest,"onUpdate:modelValue":a[0]||(a[0]=e=>r.interest=e),name:"register-articlecategoryId"},{default:v((({field:e,errorMessage:a})=>[h(m,y({options:r.interestList},e,{"key-prop":"Name","label-prop":"Name","default-text":"請選擇一項興趣主題"}),null,16,["options"]),b("span",H,w(a),1)])),_:1},8,["modelValue"])]),x(" 同意選項 "),b("div",z,[h(_,{modelValue:r.agreeTerms,"onUpdate:modelValue":a[2]||(a[2]=e=>r.agreeTerms=e),name:"register-agree"},{default:v((({errorMessage:e})=>[h(B,null,{default:v((()=>[b("div",G,[h(j,{class:"w-48 select-none"},{default:v((()=>[N])),_:1}),h(V,{modelValue:r.agreeTerms,"onUpdate:modelValue":a[1]||(a[1]=e=>r.agreeTerms=e),class:S([r.agreeTerms?"bg-myYellow":"bg-white","mySwitchBar"])},{default:v((()=>[D,b("span",{class:S([r.agreeTerms?"translate-x-8":"translate-x-0","mySwitchButton"])},null,2)])),_:1},8,["modelValue","class"])])])),_:1}),b("span",W,w(e),1)])),_:1},8,["modelValue"])]),x(" 電子信 "),b("div",C,[h(B,null,{default:v((()=>[b("div",J,[h(j,{class:"w-48 select-none"},{default:v((()=>[K])),_:1}),h(V,{modelValue:r.receiveMail,"onUpdate:modelValue":a[3]||(a[3]=e=>r.receiveMail=e),class:S([r.receiveMail?"bg-myYellow":"bg-white","mySwitchBar"])},{default:v((()=>[Q,b("span",{class:S([r.receiveMail?"translate-x-8":"translate-x-0","mySwitchButton"])},null,2)])),_:1},8,["modelValue","class"])])])),_:1})]),x(" 錯誤訊息 "),b("div",R,[r.signUpErrorMsg?(f(),g("span",X,w(r.signUpErrorMsg),1)):x("v-if",!0)]),x(" 註冊按鈕 "),b("div",Z,[b("button",{type:"submit",class:S(["relative button-lg",[r.agreeTerms?"myButtonValid myButtonValidHover":"myButtonInvalid"]]),disabled:!r.agreeTerms},[h(U,{class:"absolute top-3 left-5 w-5 h-5 text-white align-middle",show:r.signUpProcess},null,8,["show"]),b("span",null,w(r.signUpProcess?"請稍後...":"註冊"),1)],10,ee)]),b("p",ae,[se,h(M,{class:"text-xl hover:text-black",to:{name:"SignIn"}},{default:v((()=>[te,re])),_:1})])])),_:1},8,["validation-schema","onSubmit","onInvalidSubmit"])])])],32)),[[E,r.isInvalidAniProcess]])}]])}},ne={class:"overflow-hidden relative h-[calc(100vh-56px-64px)] md:grid md:grid-cols-2 md:gap-11"},ie={class:"z-20 my-auto ml-auto"},oe=b("div",{class:"relative z-10 py-4 my-auto"},[b("div",{class:"hidden overflow-hidden min-w-[600px] max-w-[500px] rounded-xl border-2 border-myBrown -translate-x-1/2 md:flex md:justify-center md:items-center md:max-w-[768px] md:max-h-[75vh]"},[b("img",{class:"block object-cover w-full h-full scale-105",src:"./assets/signup-bg-3ea45dba.svg",alt:"signin background image"})])],-1),de={class:"hidden absolute right-0 bottom-0 z-10 p-2 px-12 w-full font-bold text-right text-myBrown bg-myYellow md:block"},me=_(" 已經有帳號了 ? "),ce=b("span",{class:"inline-block underline underline-offset-4"},"點我登入",-1),ue=b("span",{class:"align-sub material-icons"},"arrow_forward",-1);var pe=O(le,[["render",function(e,a,s,t,r,l){const n=c("router-link");return f(),g("div",ne,[b("div",ie,[h(j,{appear:"",mode:"out-in","enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform opacity-0 translate-x-48","enter-to-class":"transform opacity-100 translate-x-0","leave-active-class":"transition duration-300 ease-in","leave-from-class":"transform opacity-100 translate-x-0","leave-to-class":"transform opacity-0 -translate-x-48"},{default:v((()=>[(f(),V(B("SignUpModal")))])),_:1})]),oe,b("p",de,[me,h(n,{class:"text-xl hover:text-black",to:{name:"SignIn"}},{default:v((()=>[ce,ue])),_:1})])])}]]);export{pe as default};
